<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset=utf-8 />

    <title>js ejercicio 6</title>

    <link rel="stylesheet" href="../../resources/css/bootstrap.min.css" />
</head>

<body>
    <div class="alert alert-info">
        Hacer que se pueda depositar dinero y extraer dinero.
        <br />
        La operación de extracción debe dejar un asiento en la columna monto que indique el monto en negativo y con
        color rojo (puede utilizar la clase de bootstrap text-danger).
        <br />
        La operación de depósito debe dejar un asiento en la columna monto que indique el monto positivo y con
        color verde (puede utilizar la clase de bootstrap text-success).
        <br />
        En cualquiera de los casos anteriores debe actualizar el balance total y el banlance parcial indicando el monto 
        disponible en la Cta. Cte.
    </div>

    <main class="container">
        <header>
            <h1>Mi cuenta corriente</h1>
        </header>
        <div class="alert alert-warning">
            Balance Total: $<span id="balanceActual">55,00</span>
        </div>
        <div class="container-flex">
            <div class="row">
                <div class="col-4">
                    <button id="extract_btn" onclick="Extract()">Extraer</button>
                    <input type="number" id="extract">      
                </div>
                <div class="col-4">
                    <button id="deposit_btn" onclick="Deposit()">Depositar</button>
                    <input type="number" id="deposit">    
                </div>
            </div>
            <hr>
            
        </div>
        <div class="table-responsive">
            <table class="table table-striped table-bordered" id="table">
                <thead>
                    <tr>
                        <th>Fecha de movimiento</th>
                        <th>Monto</th>
                        <th>Balance parcial</th>
                    </tr>
                </thead>
                <tbody id="tbody">
                    <tr>
                        <td>10/01/2020</td>
                        <td class="text-success">$100,00</td>
                        <td class="balance">$100,00</td>
                    </tr>
                    <tr>
                        <td>22/01/2020</td>
                        <td class="text-danger">$-45,00</td>
                        <td class="balance">$55,00</td>
                    </tr>
                </tbody>
            </table>
        </div>

    </main>
</body>

</html>

<script>
    function Deposit(){
        let monto = parseFloat(document.getElementById('deposit').value)
      
        let balanceTotal = parseFloat(document.getElementById('balanceActual').innerText)
        let totalHoy = (monto+balanceTotal)
        if(monto <= 0 && isNaN(monto)){
            alert("Primero tenés que ingresar un monto válido!")
        } else{
        var sayYes = confirm("Estás seguro de querer depositar $"+monto+"?")
        if(sayYes){
            var tabla = document.getElementById('tbody')
            var today = new Date();
            var dd = String(today.getDate()).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var yyyy = today.getFullYear();
            var actual = document.getElementById('balanceActual').value
            console.log(actual)
            today = dd + '/' + mm + '/' + yyyy;
            console.log(tbody)
            var tr = document.createElement("tr");
            var td1 = document.createElement("td")
            var td2 = document.createElement("td")
            var td3 = document.createElement("td")
        }

          tabla.append(tr);
          tr.append(td1,td2,td3)
          td1.innerText = today
          td2.innerText = "$"+monto.toFixed(2)
          td2.className = "text-success"
          td3.className = "balance"
          td3.innerText = "$"+totalHoy.toFixed(2)
          document.getElementById('balanceActual').innerText=totalHoy.toFixed(2)
          
        }
    }


    function Extract(){
    let monto2 = parseFloat(document.getElementById('extract').value)
      let balanceTotal = parseFloat(document.getElementById('balanceActual').innerText)
      let totalHoy = (balanceTotal-monto2)
      if(monto2 <= 0 || isNaN(monto2)){
          alert("Primero tenés que ingresar un monto válido!")
      } else{
          if(monto2>balanceTotal){
              alert("No podes extraer más de lo que tenés en la cuenta!")
          }else{
      var sayYes = confirm("Estás seguro de querer extraer $"+monto2+"?")
      if(sayYes){
          var tabla = document.getElementById('tbody')
          var today = new Date();
          var dd = String(today.getDate()).padStart(2, '0');
          var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
          var yyyy = today.getFullYear();
          var actual = document.getElementById('balanceActual').value
          console.log(actual)
          today = dd + '/' + mm + '/' + yyyy;
          console.log(tbody)
          var tr = document.createElement("tr");
          var td1 = document.createElement("td")
          var td2 = document.createElement("td")
          var td3 = document.createElement("td")
      }
    }

        tabla.append(tr);
        tr.append(td1,td2,td3)
        td1.innerText = today
        td2.innerText = "$"+monto2.toFixed(2)
        td2.className = "text-danger"
        td3.className = "balance"
        td3.innerText = "$"+totalHoy.toFixed(2)
        document.getElementById('balanceActual').innerText=totalHoy.toFixed(2)
        
      }
    }
</script>